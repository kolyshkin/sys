on: [push, pull_request]
name: doc
jobs:
  gen:
    runs-on: ubuntu-20.04
    steps:
    - name: Install Go
      uses: actions/setup-go@v1
      with:
        go-version: 1.15.x

    - name: Checkout code
      uses: actions/checkout@v2

    - name: make docs
      run: |
        (cd && go get golang.org/x/tools/cmd/godoc)
        make docs
    - name: save docs
      uses: actions/upload-artifact@v2
      with:
        name: docs-${{ github.run_id }}
        path: _docs/*
